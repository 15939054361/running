(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/running/index"],{1488:function(t,e,n){"use strict";var o=n("bd1c"),c=n.n(o);c.a},2915:function(t,e,n){"use strict";n.r(e);var o=n("f396"),c=n("2bbe");for(var r in c)"default"!==r&&function(t){n.d(e,t,(function(){return c[t]}))}(r);n("1488");var u,a=n("f0c5"),i=Object(a["a"])(c["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],u);e["default"]=i.exports},"2bbe":function(t,e,n){"use strict";n.r(e);var o=n("6432"),c=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=c.a},"450b":function(t,e,n){"use strict";(function(t){n("a0f9");o(n("66fd"));var e=o(n("2915"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},6432:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,c=i(n("a34a")),r=(i(n("d94c")),i(n("d3c9"))),u=n("2b96"),a=n("8fce");function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,o,c,r,u){try{var a=t[r](u),i=a.value}catch(s){return void n(s)}a.done?e(i):Promise.resolve(i).then(o,c)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(o,c){var r=t.apply(e,n);function u(t){s(r,o,c,u,a,"next",t)}function a(t){s(r,o,c,u,a,"throw",t)}u(void 0)}))}}var l={data:function(){return{weather:"获取中...",weatherImg:r.default,currentStep:0,weatherAuth:!1,stepAuth:!1}},created:function(){o=this,t.getSetting({success:function(t){var e=t.authSetting;console.log(e),e["scope.userLocation"]&&(o.weatherAuth=!0,o.getWeather()),e["scope.werun"]&&(o.stepAuth=!0,o.getStep())},fail:function(){console.log("获取失败")}})},methods:{getWeather:function(){t.getLocation({type:"gcj02",isHighAccuracy:!0,success:function(t){o.weatherAuth=!0,(0,u.nowWeather)({location:"".concat(t.longitude,",").concat(t.latitude),key:"e94ce65c8da94aa69947f2dc1d268596"}).then((function(t){var e=t.HeWeather6[0].now;o.weather=e.tmp+"℃  "+e.cond_txt,o.weatherImg="https://cdn.azhen.work/".concat(e.cond_code,".png")}))},fail:function(e){t.showToast({title:"获取地理位置失败",icon:"none"}),console.log(e)}})},getStep:function(){var e;try{t.getProvider({service:"oauth",success:function(n){console.log(n.provider),~n.provider.indexOf("weixin")&&t.login({success:function(n){n.code?(e=n.code,wx.getWeRunData({success:function(t){return f(c.default.mark((function n(){var r;return c.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o.stepAuth=!0,t.code=e,n.next=4,(0,a.getStep)(t);case 4:if(r=n.sent,0!==r.status){n.next=9;break}o.currentStep=r.data.stepInfoList[r.data.stepInfoList.length-1].step,n.next=10;break;case 9:throw new Error("解密失败");case 10:case"end":return n.stop()}}),n)})))()},fail:function(){t.showToast({title:"获取步数失败",icon:"none"})}})):console.log("登录失败！"+n.errMsg)}})}})}catch(n){console.log(n),t.showToast({title:"系统异常",icon:"none"})}}}};e.default=l}).call(this,n("543d")["default"])},bd1c:function(t,e,n){},f396:function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}));var c=function(){var t=this,e=t.$createElement;t._self._c},r=[]}},[["450b","common/runtime","common/vendor"]]]);